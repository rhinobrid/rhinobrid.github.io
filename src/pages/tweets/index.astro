---
/**
 * Tweets Index Page
 * 
 * Displays all tweets grouped by year, similar to the archives page.
 * 
 * Features:
 * - Year-based grouping
 * - Tweet count display
 * - Empty state handling
 * - Clean, minimal layout
 */

import {
  getTweetsCollection,
  groupTweetsByYear,
  sortTweetsByDate
} from '@/utils/tweets'
import CustomTweetList from '@/components/tweets/CustomTweetList.astro'
import PageLayout from '@/layouts/BaseLayout.astro'

export const prerender = true

const allTweets = sortTweetsByDate(await getTweetsCollection())
const tweetsByYear = groupTweetsByYear(allTweets)
const totalTweets = allTweets.length
const totalYears = tweetsByYear.length

const meta = {
  description: `A collection of ${totalTweets} tweets`,
  title: 'Tweets'
}
---

<PageLayout {meta}>
  <main class='mt-6 lg:mt-10'>
    <header id='content-header' class='animate mb-8'>
      <h1 class='text-3xl font-medium'>Tweets</h1>
      <p class='text-muted-foreground mt-2'>
        {totalTweets} tweet{totalTweets !== 1 ? 's' : ''} across {totalYears} year{totalYears !== 1 ? 's' : ''}
      </p>
    </header>
    
    <section id='tweets-feed' class='animate'>
      {tweetsByYear.length === 0 ? (
        <div class='empty-state'>
          <p>No tweets yet.</p>
          <p class='text-sm text-muted-foreground mt-1'>Check back soon!</p>
        </div>
      ) : (
        <CustomTweetList {tweetsByYear} />
      )}
    </section>
  </main>
</PageLayout>

<style>
  .empty-state {
    @apply text-center py-12 text-muted-foreground;
  }
</style>
